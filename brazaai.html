<!DOCTYPE html>
<html>
<head>
  <title>Gemini AI com Memória</title>
</head>
<body>
  <h1>Teste do Gemini com Memória</h1>
  <input type="text" id="inputText" placeholder="Digite sua pergunta..." />
  <button onclick="chamarGemini()">Enviar</button>
  <pre id="resposta"></pre>

  <script>
    const historico = [];

    async function chamarGemini() {
      const input = document.getElementById('inputText').value;
      const respostaDiv = document.getElementById('resposta');
      respostaDiv.textContent = 'Carregando...';

      // Adiciona a nova entrada do usuário ao histórico
      historico.push({ role: 'user', text: input });

      const contents = historico.map(mensagem => ({
        parts: [{ text: mensagem.text }]
      }));

      const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDh-Xemw0S2EInqFBnj-FO2ySWT1XSuY28", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ contents })
      });

      const data = await response.json();
      const resposta = data.candidates?.[0]?.content?.parts?.[0]?.text || "Erro ao gerar resposta.";

      // Adiciona a resposta da IA ao histórico
      historico.push({ role: 'model', text: resposta });

      respostaDiv.textContent = resposta;
    }
  </script>
</body>
</html>
